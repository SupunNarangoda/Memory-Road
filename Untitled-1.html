<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Road - A Dementia Awareness Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .screen {
            display: none;
            width: 100%;
            max-width: 1200px;
            padding: 20px;
            animation: fadeIn 0.5s ease-in;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Menu Screen */
        .menu-container {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 60px 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .game-title {
            font-size: 3.5em;
            color: #667eea;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .game-subtitle {
            font-size: 1.3em;
            color: #666;
            margin-bottom: 40px;
        }

        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }

        .btn {
            padding: 18px 50px;
            font-size: 1.2em;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            min-width: 300px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
            transform: translateY(-3px);
        }

        .about-text {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            text-align: left;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .about-text h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .about-text p {
            line-height: 1.6;
            color: #555;
            margin-bottom: 15px;
        }

        .about-text .stats {
            background: #fff;
            padding: 15px;
            border-left: 4px solid #667eea;
            margin-top: 15px;
            font-weight: bold;
        }

        /* Game Screen */
        .game-container {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
        }

        .score-display {
            font-size: 1.5em;
            font-weight: bold;
        }

        .position-display {
            font-size: 1.2em;
        }

        .board-container {
            position: relative;
            background: linear-gradient(to bottom, #e0f7fa 0%, #fff9c4 50%, #ffccbc 100%);
            border-radius: 15px;
            padding: 40px;
            min-height: 500px;
            margin-bottom: 30px;
            border: 3px solid #667eea;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 10px;
            margin-bottom: 30px;
        }

        .tile {
            aspect-ratio: 1;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 0.9em;
            padding: 5px;
            transition: all 0.3s ease;
            position: relative;
        }

        .tile.special {
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            color: white;
            font-weight: bold;
        }

        .tile.memory {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }

        .tile-number {
            font-weight: bold;
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .tile-label {
            font-size: 0.7em;
            text-align: center;
        }

        .player-token {
            position: absolute;
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, #ff6b6b 0%, #ee5a6f 100%);
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            z-index: 10;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .dice-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            padding: 20px;
        }

        .dice {
            width: 80px;
            height: 80px;
            background: white;
            border: 3px solid #667eea;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .dice.rolling {
            animation: diceRoll 0.5s ease-in-out;
        }

        @keyframes diceRoll {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(90deg) scale(1.1); }
            50% { transform: rotate(180deg) scale(1.2); }
            75% { transform: rotate(270deg) scale(1.1); }
        }

        .btn-roll {
            padding: 15px 40px;
            font-size: 1.3em;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .btn-roll:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(245, 87, 108, 0.4);
        }

        .btn-roll:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Quiz Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            font-size: 1.8em;
            color: #667eea;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .quiz-question {
            font-size: 1.3em;
            margin-bottom: 25px;
            color: #333;
            line-height: 1.5;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 25px;
        }

        .quiz-option {
            padding: 15px 25px;
            background: #f0f0f0;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            text-align: left;
        }

        .quiz-option:hover {
            background: #e0e0e0;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .quiz-option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .quiz-option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .quiz-option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .quiz-feedback {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            border-left: 4px solid #4caf50;
        }

        .quiz-feedback.incorrect {
            border-left: 4px solid #ff9800;
        }

        .quiz-feedback h4 {
            margin-bottom: 10px;
            color: #667eea;
        }

        .quiz-feedback p {
            line-height: 1.6;
            color: #555;
        }

        /* Results Screen */
        .results-container {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 50px 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .results-title {
            font-size: 3em;
            color: #667eea;
            margin-bottom: 30px;
        }

        .results-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .results-message {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            font-size: 1.2em;
            line-height: 1.6;
            color: #555;
        }

        .dementia-fact {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #ff6b6b;
        }

        .dementia-fact h3 {
            color: #d32f2f;
            margin-bottom: 15px;
        }

        .dementia-fact p {
            color: #333;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .game-title {
                font-size: 2.5em;
            }

            .board {
                grid-template-columns: repeat(5, 1fr);
                gap: 5px;
            }

            .tile {
                font-size: 0.7em;
            }

            .player-token {
                width: 20px;
                height: 20px;
            }

            .modal-content {
                padding: 25px;
            }
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50 0%, #8bc34a 100%);
            transition: width 0.5s ease;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <!-- Menu Screen -->
    <div id="menuScreen" class="screen active">
        <div class="menu-container">
            <h1 class="game-title">🧠 Memory Road</h1>
            <p class="game-subtitle">A Journey to Celebrate Your Life Memories</p>
            
            <div class="menu-buttons">
                <button class="btn btn-primary" onclick="startGame()">Start Memory Journey</button>
                <button class="btn btn-secondary" onclick="toggleAbout()">About This Activity</button>
                <button class="btn btn-secondary" onclick="showHighScore()">My Best Score</button>
            </div>

            <div id="aboutSection" class="about-text" style="display: none;">
                <h3>About Memory Road</h3>
                <p>Memory Road is a gentle memory exercise designed for people with dementia to test recall of real historical events and cultural memories from their lifetime in Australia.</p>
                
                <div class="stats">
                    💙 This activity uses real facts and events to stimulate long-term memory recall in a supportive way.
                </div>

                <p><strong>How to Play:</strong></p>
                <p>🎲 Roll the dice to move along your memory path<br>
                💭 Answer questions about real events from Australian history and your lifetime<br>
                ⭐ Test your memory of things like decimal currency, the moon landing, and childhood experiences<br>
                💙 Learn or re-learn facts in a gentle, encouraging environment</p>

                <p><strong>Benefits:</strong> Reminiscence therapy using real historical events can help stimulate long-term memory, improve mood, and provide a sense of connection to the past. Questions are based on common Australian experiences for people aged 60+.</p>

                <h3>For Caregivers</h3>
                <p>This game helps your loved one recall factual memories from their past. If they answer incorrectly, the game gently reminds them of the correct answer. This is normal and okay - reminiscence therapy is about the process, not perfection. Sit with them, encourage them, and celebrate what they do remember!</p>
                
                <p><strong>Support:</strong> Dementia Australia Helpline: 1800 100 500</p>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen">
        <div class="game-container">
            <div class="game-header">
                <div>
                    <div class="score-display">Memory Points: <span id="score">0</span></div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar"></div>
                    </div>
                </div>
                <div class="position-display">Position: <span id="position">1</span>/30</div>
                <button class="btn btn-secondary" onclick="quitGame()" style="padding: 10px 20px; min-width: auto;">Quit</button>
            </div>

            <div class="board-container">
                <div class="board" id="gameBoard"></div>
                <div id="playerToken" class="player-token"></div>
            </div>

            <div class="dice-controls">
                <div class="dice" id="diceDisplay">?</div>
                <button class="btn-roll" id="rollButton" onclick="rollDice()">Roll Dice 🎲</button>
            </div>
        </div>
    </div>

    <!-- Results Screen -->
    <div id="resultsScreen" class="screen">
        <div class="results-container">
            <h1 class="results-title">Journey Complete! 🎉</h1>
            
            <div class="results-stats">
                <div class="stat-card">
                    <div class="stat-value" id="finalScore">0</div>
                    <div class="stat-label">Memory Points</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="correctAnswers">0</div>
                    <div class="stat-label">Correct Answers</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalQuestions">0</div>
                    <div class="stat-label">Questions Answered</div>
                </div>
            </div>

            <div class="results-message" id="resultsMessage"></div>

            <div class="dementia-fact">
                <h3>💙 Your Memories Matter</h3>
                <p id="finalFact"></p>
            </div>

            <div class="menu-buttons">
                <button class="btn btn-primary" onclick="startGame()">Play Again</button>
                <button class="btn btn-secondary" onclick="backToMenu()">Main Menu</button>
            </div>
        </div>
    </div>

    <!-- Quiz Modal -->
    <div id="quizModal" class="modal">
        <div class="modal-content">
            <div class="modal-header" id="quizCategory">Memory Question</div>
            <div class="quiz-question" id="quizQuestion"></div>
            <div class="quiz-options" id="quizOptions"></div>
            <div class="quiz-feedback" id="quizFeedback"></div>
            <button class="btn btn-primary" id="continueButton" onclick="closeQuiz()" style="display: none; width: 100%;">Continue Journey</button>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            position: 0,
            score: 0,
            questionsAnswered: 0,
            correctAnswers: 0,
            currentDiceRoll: 0,
            isMoving: false,
            hasAnsweredQuestion: false
        };

        // Board Configuration - 30 tiles total
        const TOTAL_TILES = 30;
        const MEMORY_TILES = [5, 10, 15, 20, 25]; // Special memory milestone tiles

        // Real Historical & Personal Memory Questions for Australian Dementia Patients
        // Based on actual events people aged 60-90+ would remember from their lives
        const quizQuestions = [
            {
                category: "Australian History",
                question: "Do you remember when man first walked on the moon? What year did Neil Armstrong take that famous step?",
                options: [
                    "1965",
                    "1969",
                    "1972",
                    "1975"
                ],
                correct: 1,
                feedback: "Yes! It was July 1969 when Neil Armstrong walked on the moon. Many Australians stayed up late to watch it on TV. Do you remember watching it? The Parkes radio telescope in NSW helped broadcast those images to the world!"
            },
            {
                category: "Australian Prime Ministers",
                question: "Do you remember Prime Minister Gough Whitlam? He was famously dismissed in 1975. Who was he replaced by?",
                options: [
                    "Bob Hawke",
                    "Malcolm Fraser",
                    "Paul Keating",
                    "John Howard"
                ],
                correct: 1,
                feedback: "That's right - Malcolm Fraser became Prime Minister after the dismissal. November 11, 1975 was a dramatic day in Australian politics. Many people remember exactly where they were when they heard the news on the radio."
            },
            {
                category: "Childhood Treats",
                question: "When you were young, what did the milkman deliver to your doorstep in glass bottles early in the morning?",
                options: [
                    "Milk in cardboard cartons",
                    "Fresh milk in glass bottles",
                    "Powdered milk in bags",
                    "We bought milk from shops"
                ],
                correct: 1,
                feedback: "Yes! Fresh milk in glass bottles, delivered right to your door! You might remember the sound of bottles clinking early in the morning, or the cream that rose to the top. In summer, you had to get the bottles in quickly before the magpies pecked through the foil tops!"
            },
            {
                category: "School Days",
                question: "When you were at school, what did you use to write on before whiteboards were invented?",
                options: [
                    "Computer screens",
                    "Blackboards with chalk",
                    "Paper only",
                    "Tablets and styluses"
                ],
                correct: 1,
                feedback: "Correct! Blackboards with chalk - and you might remember the smell of the chalk dust, or being chosen to clean the dusters by banging them together outside. Some students were picked to be 'blackboard monitor' - was that ever you?"
            },
            {
                category: "Technology Changes",
                question: "Before mobile phones, if you needed to make a phone call when you were out, what did you use?",
                options: [
                    "A public phone box (with coins)",
                    "You couldn't call anyone",
                    "A walkie-talkie",
                    "Email on a laptop"
                ],
                correct: 0,
                feedback: "That's right! Red public phone boxes where you put in coins - usually 20 cents for a local call. Do you remember the sound of the coins dropping in, or having to carry coins just in case you needed to 'ring home'? Some had yellow pages books attached with chains."
            },
            {
                category: "Royal Visits",
                question: "Queen Elizabeth II visited Australia many times. Do you remember - was she crowned Queen in 1952 or 1962?",
                options: [
                    "1952",
                    "1962",
                    "1945",
                    "1970"
                ],
                correct: 0,
                feedback: "Yes, 1952! She became Queen when her father King George VI died. Many Australians gathered around radios and later TVs to follow royal events. Did you ever see the Queen during one of her Australian visits? Many people lined the streets waving flags."
            },
            {
                category: "Australian Currency",
                question: "Australia changed from pounds, shillings and pence to decimal currency. What year did we start using dollars and cents?",
                options: [
                    "1956",
                    "1966",
                    "1976",
                    "1986"
                ],
                correct: 1,
                feedback: "Correct! February 14, 1966 - Decimal Currency Day, or 'C-Day'! Do you remember learning to convert pounds to dollars? Shops had conversion charts everywhere. A pound became two dollars. It was quite confusing at first, wasn't it?"
            },
            {
                category: "Television Memories",
                question: "When television first came to most Australian homes, what color were the programs?",
                options: [
                    "Full color from the start",
                    "Black and white only",
                    "Sepia tone",
                    "Blue and white"
                ],
                correct: 1,
                feedback: "That's right - black and white! Color TV didn't arrive in Australia until 1975. Do you remember gathering around the TV to watch shows like 'Pick a Box' or the news? The whole family would sit together. Some people put colored plastic sheets over the screen to pretend it was color!"
            },
            {
                category: "Shopping Memories",
                question: "Before supermarkets, where did your family buy fresh bread?",
                options: [
                    "From the baker's shop or a bread cart",
                    "It came by mail",
                    "Only from supermarkets",
                    "We made all our own"
                ],
                correct: 0,
                feedback: "Yes! From the local baker's shop, or a baker who came around in a horse and cart or van! Do you remember the smell of fresh bread? Some bakers would call out 'Bread-oh!' or ring a bell. Nothing beats the taste of bread from the baker, still warm!"
            },
            {
                category: "Summer Holidays",
                question: "When you were young and went to the beach, what was the most popular ice cream on a stick?",
                options: [
                    "Paddle Pop",
                    "Magnum",
                    "Ben & Jerry's",
                    "Gelato"
                ],
                correct: 0,
                feedback: "Paddle Pop! Those rainbow-colored ice creams were perfect for hot summer days at the beach. Do you remember racing to eat it before it melted down your arm? Chocolate, caramel, and rainbow were the classic flavors. The wooden stick was fun to chew on afterwards!"
            },
            {
                category: "Transport",
                question: "Before everyone had cars, how did most people get to work in the city?",
                options: [
                    "By bicycle or helicopter",
                    "By tram, bus, or train",
                    "Everyone had cars",
                    "By horse and cart"
                ],
                correct: 1,
                feedback: "That's right - by tram, bus, or train! Cities had extensive tram networks. Do you remember the conductor coming through to collect fares, or the sound of the tram bell? Melbourne still has its trams today, but many other cities lost theirs in the 1950s-60s."
            },
            {
                category: "Music & Dance",
                question: "In the 1950s and 60s, what type of music did young people dance to at dances?",
                options: [
                    "Rock and Roll and pop music",
                    "Heavy metal",
                    "Hip hop and rap",
                    "Electronic dance music"
                ],
                correct: 0,
                feedback: "Rock and Roll! Elvis Presley, The Beatles, and local bands like The Easybeats. Do you remember going to dances at the local hall? Girls in full skirts, boys in their best shirts. Maybe you did the Twist or the Jive? Those were fun times!"
            },
            {
                category: "Kitchen Appliances",
                question: "Before electric refrigerators were common, how did families keep food cold?",
                options: [
                    "They bought food fresh every day",
                    "Ice boxes with blocks of ice",
                    "Food didn't need to be cold",
                    "Everyone had freezers"
                ],
                correct: 1,
                feedback: "Yes! Ice boxes with big blocks of ice delivered by the ice man! Do you remember the ice truck coming around? Children would run out to grab small chips of ice on hot days. The ice man used big tongs to carry the heavy blocks. Modern refrigerators made life much easier!"
            },
            {
                category: "Clothing & Fashion",
                question: "When you were young, what did women wear on their legs instead of pants?",
                options: [
                    "Always pants and jeans",
                    "Stockings and skirts/dresses",
                    "Shorts all year",
                    "Nothing - bare legs only"
                ],
                correct: 1,
                feedback: "That's right - stockings and skirts or dresses! Women rarely wore pants out of the house. Do you remember seamed stockings, or garter belts? When pantyhose came along in the 1960s, it was revolutionary! And skirts were expected to be below the knee - mini skirts were quite scandalous!"
            },
            {
                category: "Sports Memories",
                question: "Australian cricketer Don Bradman was famous in the 1930s-40s. What was his nickname?",
                options: [
                    "The Don",
                    "The King",
                    "The Boss",
                    "The Chief"
                ],
                correct: 0,
                feedback: "Correct - 'The Don'! Sir Donald Bradman is still considered the greatest batsman ever. His Test batting average was 99.94 - incredible! Do you remember listening to cricket on the radio? Or reading about his matches in the newspaper? He was a true Australian hero."
            },
            {
                category: "World Events",
                question: "World War II ended in 1945. Do you remember - which day do we commemorate as Remembrance Day?",
                options: [
                    "January 26",
                    "April 25 (ANZAC Day)",
                    "November 11",
                    "December 25"
                ],
                correct: 2,
                feedback: "Yes, November 11 - at 11am, the 11th hour of the 11th day of the 11th month. That's when WWI ended in 1918. Do you remember the minute of silence? Many people still observe it today. ANZAC Day (April 25) commemorates the landing at Gallipoli and all who served."
            }
        ];

        // Encouraging messages for memory recall results
        const dementiaFacts = [
            "Your life story is unique and valuable. Every memory you hold is a treasure that shaped who you are. Thank you for sharing your journey with us today.",
            "Reminiscing about positive memories can bring comfort and joy. The happy times you've experienced are always part of you, even if they feel distant sometimes.",
            "Your memories of family, friends, and special moments are the legacy of a life well-lived. These connections and experiences define your beautiful story.",
            "Music, smells, and familiar places can help unlock precious memories. Your senses are powerful tools for connecting with your past.",
            "Every person's memory journey is different. Some memories stay crystal clear while others fade, and that's perfectly okay. You are valued and loved just as you are.",
            "Sharing memories with family and friends helps keep them alive. Your stories matter and deserve to be heard, celebrated, and remembered by others."
        ];

        // Initialize game
        function initGame() {
            createBoard();
            loadHighScore();
        }

        // Create game board
        function createBoard() {
            const board = document.getElementById('gameBoard');
            board.innerHTML = '';

            for (let i = 1; i <= TOTAL_TILES; i++) {
                const tile = document.createElement('div');
                tile.className = 'tile';
                tile.id = `tile-${i}`;
                
                if (MEMORY_TILES.includes(i)) {
                    tile.classList.add('special');
                    tile.innerHTML = `<div class="tile-number">${i}</div><div class="tile-label">🌟 Milestone</div>`;
                } else if (i % 3 === 0) {
                    tile.classList.add('memory');
                    tile.innerHTML = `<div class="tile-number">${i}</div><div class="tile-label">💭 Memory</div>`;
                } else {
                    tile.innerHTML = `<div class="tile-number">${i}</div><div class="tile-label">Path</div>`;
                }

                board.appendChild(tile);
            }

            updatePlayerPosition();
        }

        // Start new game
        function startGame() {
            gameState = {
                position: 0,
                score: 0,
                questionsAnswered: 0,
                correctAnswers: 0,
                currentDiceRoll: 0,
                isMoving: false,
                hasAnsweredQuestion: false
            };

            updateUI();
            switchScreen('gameScreen');
            createBoard();
            updatePlayerPosition();
        }

        // Roll dice
        function rollDice() {
            if (gameState.isMoving) return;

            const rollButton = document.getElementById('rollButton');
            const diceDisplay = document.getElementById('diceDisplay');
            
            rollButton.disabled = true;
            diceDisplay.classList.add('rolling');

            // Simulate dice roll animation
            let rollCount = 0;
            const rollInterval = setInterval(() => {
                diceDisplay.textContent = Math.floor(Math.random() * 6) + 1;
                rollCount++;

                if (rollCount >= 10) {
                    clearInterval(rollInterval);
                    const finalRoll = Math.floor(Math.random() * 6) + 1;
                    diceDisplay.textContent = finalRoll;
                    diceDisplay.classList.remove('rolling');
                    
                    gameState.currentDiceRoll = finalRoll;
                    movePlayer(finalRoll);
                }
            }, 100);
        }

        // Move player
        function movePlayer(spaces) {
            gameState.isMoving = true;
            const newPosition = Math.min(gameState.position + spaces, TOTAL_TILES);
            
            let currentPos = gameState.position;
            const moveInterval = setInterval(() => {
                if (currentPos < newPosition) {
                    currentPos++;
                    gameState.position = currentPos;
                    updatePlayerPosition();
                    updateUI();
                } else {
                    clearInterval(moveInterval);
                    gameState.isMoving = false;
                    
                    // Check if game is complete
                    if (gameState.position >= TOTAL_TILES) {
                        setTimeout(() => showResults(), 1000);
                    } else {
                        // Show quiz for this tile
                        setTimeout(() => showQuiz(), 500);
                    }
                }
            }, 300);
        }

        // Update player token position on board
        function updatePlayerPosition() {
            const token = document.getElementById('playerToken');
            const tile = document.getElementById(`tile-${Math.max(1, gameState.position)}`);
            
            if (tile) {
                const rect = tile.getBoundingClientRect();
                const boardRect = document.getElementById('gameBoard').getBoundingClientRect();
                
                token.style.left = (rect.left - boardRect.left + rect.width / 2 - 15) + 'px';
                token.style.top = (rect.top - boardRect.top + rect.height / 2 - 15) + 'px';
            }
        }

        // Show quiz modal
        function showQuiz() {
            const modal = document.getElementById('quizModal');
            const question = quizQuestions[Math.floor(Math.random() * quizQuestions.length)];
            
            document.getElementById('quizCategory').textContent = question.category;
            document.getElementById('quizQuestion').textContent = question.question;
            
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';
            
            // Store current question for answer checking
            window.currentQuestion = question;
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'quiz-option';
                optionDiv.textContent = option;
                optionDiv.setAttribute('data-index', index);
                optionDiv.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(optionDiv);
            });

            document.getElementById('quizFeedback').classList.remove('show', 'correct', 'incorrect');
            document.getElementById('continueButton').style.display = 'none';
            gameState.hasAnsweredQuestion = false;
            
            modal.classList.add('active');
        }

        // Handle answer selection - Real factual testing with gentle correction
        function selectAnswer(selectedIndex) {
            if (gameState.hasAnsweredQuestion) return;
            
            gameState.hasAnsweredQuestion = true;
            gameState.questionsAnswered++;
            
            const question = window.currentQuestion;
            const correctIndex = question.correct;
            const feedback = question.feedback;
            
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.style.pointerEvents = 'none');
            
            options[selectedIndex].classList.add('selected');
            
            setTimeout(() => {
                // Show the correct answer
                options[correctIndex].classList.add('correct');
                
                const feedbackDiv = document.getElementById('quizFeedback');
                const isCorrect = selectedIndex === correctIndex;
                
                if (isCorrect) {
                    gameState.correctAnswers++;
                    gameState.score += 10;
                    feedbackDiv.innerHTML = `
                        <h4>✅ That's Right!</h4>
                        <p>${feedback}</p>
                    `;
                    feedbackDiv.classList.add('correct');
                    feedbackDiv.classList.remove('incorrect');
                    playSound('success');
                } else {
                    // Mark wrong answer but don't penalize score heavily
                    options[selectedIndex].classList.add('incorrect');
                    feedbackDiv.innerHTML = `
                        <h4>💙 Let me help you remember...</h4>
                        <p>You selected: <strong>${question.options[selectedIndex]}</strong></p>
                        <p>The correct answer is: <strong>${question.options[correctIndex]}</strong></p>
                        <p>${feedback}</p>
                        <p style="margin-top: 15px; font-style: italic; color: #666;">It's okay if you didn't remember this one. Our memories work differently, and some things are easier to recall than others.</p>
                    `;
                    feedbackDiv.classList.add('incorrect');
                    feedbackDiv.classList.remove('correct');
                }
                
                feedbackDiv.classList.add('show');
                document.getElementById('continueButton').style.display = 'block';
                updateUI();
            }, 500);
        }

        // Close quiz modal
        function closeQuiz() {
            const modal = document.getElementById('quizModal');
            modal.classList.remove('active');
            document.getElementById('rollButton').disabled = false;
        }

        // Update UI elements
        function updateUI() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('position').textContent = gameState.position;
            
            const progress = (gameState.position / TOTAL_TILES) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // Show results screen - Modified for therapeutic messaging
        function showResults() {
            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('correctAnswers').textContent = gameState.correctAnswers;
            document.getElementById('totalQuestions').textContent = gameState.questionsAnswered;
            
            // Generate encouraging message based on participation
            let message = '';
            
            if (gameState.questionsAnswered >= 10) {
                message = `Wonderful job today! You've shared ${gameState.questionsAnswered} precious memories from your life. Each memory you recalled shows the richness of your experiences. Your story matters, and taking time to remember these moments is valuable and therapeutic.`;
            } else if (gameState.questionsAnswered >= 6) {
                message = `Great work remembering and sharing today! You've explored ${gameState.questionsAnswered} special memories. Reminiscing about your life experiences can bring comfort and connection. Thank you for taking this journey down memory road.`;
            } else if (gameState.questionsAnswered >= 3) {
                message = `Thank you for sharing ${gameState.questionsAnswered} memories with us today. Every memory recalled is a success! Some days remembering is easier than others, and that's perfectly normal. Your experiences and feelings are always valid.`;
            } else {
                message = `Thank you for spending time with us today. Even remembering just a little bit is meaningful. Your memories are important, and we're here to support you on this journey. You're doing great!`;
            }
            
            document.getElementById('resultsMessage').textContent = message;
            
            // Show encouraging fact
            const randomFact = dementiaFacts[Math.floor(Math.random() * dementiaFacts.length)];
            document.getElementById('finalFact').textContent = randomFact;
            
            // Save high score
            saveHighScore();
            
            switchScreen('resultsScreen');
        }

        // High score management
        function saveHighScore() {
            const highScore = localStorage.getItem('memoryRoadHighScore') || 0;
            if (gameState.score > highScore) {
                localStorage.setItem('memoryRoadHighScore', gameState.score);
            }
        }

        function loadHighScore() {
            return localStorage.getItem('memoryRoadHighScore') || 0;
        }

        function showHighScore() {
            const highScore = loadHighScore();
            alert(`🏆 Your High Score: ${highScore} Memory Points\n\nKeep playing to learn more about dementia awareness!`);
        }

        // Screen navigation
        function switchScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function toggleAbout() {
            const aboutSection = document.getElementById('aboutSection');
            aboutSection.style.display = aboutSection.style.display === 'none' ? 'block' : 'none';
        }

        function quitGame() {
            if (confirm('Are you sure you want to quit? Your progress will be lost.')) {
                switchScreen('menuScreen');
            }
        }

        function backToMenu() {
            switchScreen('menuScreen');
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            if (gameState.position > 0) {
                updatePlayerPosition();
            }
        });

        // Initialize game on load
        window.addEventListener('DOMContentLoaded', initGame);

        // Simple sound effect placeholders (can be replaced with actual audio)
        function playSound(type) {
            // Placeholder for sound effects
            // In production, you would use: new Audio('assets/sounds/' + type + '.mp3').play();
            console.log('Playing sound:', type);
        }
    </script>
</body>
</html>